from flask import Flask, render_template, request
from bs4 import BeautifulSoup
import requests  # Import the requests library


app = Flask(__name__)

# Sample website content
url = "http://index.com"  # Replace with the URL of the webpage you want to search

# content = """
# Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
# Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
# Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
# Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. my name is arjun bhandari i live in biratnagar i am doing small project
# """

# Function to fetch webpage content
def fetch_content(url):
    response = requests.get(url)
    return response.text

# Fetch webpage content
content = fetch_content(url)


@app.route("/")
def index():
    return render_template("index.html")

@app.route("/search", methods=["POST"])
def search():
    query = request.form["query"]
    results = search_content(query)
    return render_template("index.html", results=results, query=query)

def search_content(query):
    soup = BeautifulSoup(content, "html.parser")
    sentences = soup.get_text().split(".")
    results = []
    for sentence in sentences:
        if query.lower() in sentence.lower():
            results.append(sentence)
    return results

if __name__ == "__main__":
    app.run(port=5001)
    app.run(debug=True)